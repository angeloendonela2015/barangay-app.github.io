<%= form_with(model: chat, method: :post) do |form| %>
  <div class="container">
    <div class="input-group mb-3 ">
      <%= form.label :name_chat, class:"input-group-text", style: "display: block" do %><%= image_tag('user (1).svg') %><% end %>
      <%= form.text_field :name_chat, class:"form-control text-capitalize", placeholder:"Name of person" %>        
    </div>

    <div class="input-group mb-3 ">
      <%= form.label :phone_number, class:"input-group-text", style: "display: block" do %><%= image_tag('phone (1).svg') %><% end %>
      <%= form.text_field :phone_number, class:"form-control text-capitalize", placeholder:"Number" %>
    </div>

    <div class="container mt-3">
      <div class="row">
        <div class="col-md-12 d-flex justify-content-center">
          <%= form.text_area :body, class:"form-control textarea", id:"summary", maxlength:"200", placeholder:"Type Here...", onkeyup:"validate()" %>
        </div>
        <div class="d-flex justify-content-end">
          <%= form.label :body, style: "display: block, font-size:10px;", class:"d-none mt-3 text-muted fst-italic", id:"words_count" do %>
            200 / <span id="textcount"></span>
          <% end %>
        </div>
      </div>
    </div>

    <div class="d-grid gap-2 col-4 mx-auto mt-3">
      <%= form.submit 'Send Message', class:"btn btn-primary btn-sm shadow", style:"background-color:#6f42c1;" %>
    </div>
  </div>
<% end %>

<script>
  function validate(){
      const areatextarea = document.querySelector("#summary");
      const areatext = document.querySelector("#summary").value.length;
      const textcount = document.querySelector("#textcount");
      const wordcount = document.querySelector("#words_count");
      textcount.innerHTML = areatext;
      
      
      if(areatext > 50){
          textcount.classList.add("text-danger");
          areatextarea.classList.add("textarea_danger");
      }else{
          textcount.classList.remove("text-danger");
          areatextarea.classList.remove("textarea_danger");
      }
      
      if(areatext < 1){
          wordcount.classList.add("d-none");
      }else{
          wordcount.classList.remove("d-none");
      }
}
</script>